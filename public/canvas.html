<html>
<head>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.slim.js"></script> -->
<script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <canvas id="canvas" width="100%" height="100%"></canvas>

<script>

  var ip = window.location.host; //prompt('IP', window.location.host);

// https://developer.mozilla.org/en-US/docs/Web/Security/Mixed_content#Warnings_in_Web_Console
var socket = io('http://' + ip + '/canvas');


var canvas = document.getElementById('canvas');
var ctx = canvas.getContext("2d");
ctx.font = "30px Arial";
ctx.fillText("Hello World", 10, 50); 


function sendCanvas() {
  var canvas = document.getElementById('canvas');

  // var dataURL = canvas.toDataURL();

  // https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob
  canvas.toBlob(function(blob) {
    socket.emit('blob', blob);
    console.log('sending')
  })
  
}

setInterval(sendCanvas, 5000);


</script>
</body>
</html>
